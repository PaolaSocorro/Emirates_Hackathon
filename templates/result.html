<!doctype html>
<html>
<head>
    <title>Path Finder</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="stylesheet" href="static/main.css">
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.mapbox.com/mapbox.js/v2.2.3/mapbox.js'></script>
    <link href='https://api.mapbox.com/mapbox.js/v2.2.3/mapbox.css' rel='stylesheet' />
</head>
<body>
    <div class="container">
        <h1>Persona Type</h1>

        <div>
            {%for destination in result%}

                <div class="result parent-wrap">
                    <p>{{result[destination]}}</p>
                </div>

            {%endfor%}

        </div>


        <div id='map'></div>
        
        <script>
        L.mapbox.accessToken = 'pk.eyJ1IjoicGFyb21pIiwiYSI6ImNpZ3B5NHRwcTAxbjF1Nm0xbjhpaHdjaTkifQ.rDCvdPUh5POYzuXrixzSKw';

        var map = L.mapbox.map('map', 'paromi.o3p67opg');

        // omnivore.csv('/data/testplaces.csv').addTo(map);

        // Open popup when user mouses over a marker
        map.featureLayer.on('ready', function(e) {
            var markers = [];
            this.eachLayer(function(marker) { markers.push(marker); });
            cycle(markers);
        });

        function cycle(markers) {
            var i = 0;
            function run() {
                if (++i > markers.length - 1) i = 0;
                map.setView(markers[i].getLatLng(), 5);
                markers[i].openPopup();
                window.setTimeout(run, 3000);
            }
            run();
        }
        </script>


    </div>

    <footer>Copyright Â©Path Finder 2015 All Rights Reserved</footer>
    <script src="http://code.jquery.com/jquery-2.1.4.min.js"></script>

 
</body>
</html>